
# 0.5.0-RC1 (2024-02-28)

Check out the documentation at
[https://scala-native.readthedocs.io/](https://scala-native.readthedocs.io/en/latest)

## TL;DR
* **Not backward compatible with previous releases**,
* Added support for multithreading based on platform threads
* Added support for targeting 32-bit architectures
* Initial source level debugging support
* Various changes to the build system. See "Build Integrator features" below.
* Removed stub implementation for partially implemented Java Standard Library types
* SIP-51 support: artifacts for every Scala standard library version 

## Supported Scala versions

| Scala Binary Version | Supported Scala Versions |
| -------------------- | ------------------------ |
| 2.12 | 2.12.14 ... 2.12.19 |
| 2.13 | 2.13.8 ... 2.13.13 |
| 3    | 3.1.2 ... 3.1.3<br>3.2.0 ... 3.2.2<br>3.3.0 ... 3.3.2<br>3.4.0 |


> Upon release of new Scala version (stable, or Scala 3 RC) version dependent artifacts would be published without a new release. 

<br>
<table>
<tbody>
  <tr>
    <td>Commits since 0.4.17 (excluding backported commits):</td>
    <td align="center">244</td>
  </tr>
    <tr>
    <td>Contributors:</td>
    <td align="center">18</td>
  </tr>
</tbody>
</table>



## New features
### Multithreading support
Scala Native now allows to use system threads based on `java.lang.Thread` implementation, along with all the necessary primitives to work with concurrency: 
 * `synchronized` blocks are now using object monitors following partially JVM semantics - these might be less performant when compared to JVM, but are going to achive improvements in the followup patch releases.
 * JVM compliant support for `@volatile` annotations
 * Configurable mostly JVM-compliant support for final fields semantics, see [multithreading guide](../../user/lang.md/#multithreading)
 * Thread safe implementation of most `java.util.concurrent` types and methods, including atomics, thread pools, etc. See list of currently implemented primitives in our [meta-issue on GitHub](https://github.com/scala-native/scala-native/issues/3165). Be aware that our Java Standard Library implementation might still contain thread-unsafe implementations of types not listed in the tracker.
 * Support for most of `scala.concurrent` and `scala.collection.concurrent` types.
 * Multithreading-aware implemenation of all garbage collections.

### Support for 32-bit architectures
We've introduced preliminary, experimental support for targeting 32bit architectures, like ARMv7. 
To allow for representing variable-length integers in C bindings, we've introduced 2 new types `scala.scalanative.unsafe.{Size, USize}` which correspond to `ssize_t, size_t` in C. During linking these would be transformed into 32 or 64 bits longs integer.
Multiple C standard library and POSIX bindings were adapted to use these new types.

### Initial support for source level debugging
We've introduced initial support for generating source level debug informations, allowing to map code executed in the debugger to the original sources or to represent local variables. When executing on MacOS it also allows to obtain approximated source code lines in the exception stack traces.
Be aware that both Scala Native optimizer and LLVM optimizers can remove some of the optimized out debug informations. For best experience run with disabled optimizations: 
```scala
  nativeConfig ~= { 
        .withSourceLevelDebuggingConfig(_.enableAll) // enable generation of debug informations
        .withOptimize(false)  // disable Scala Native optimizer
        .withMode(scalanative.build.Mode.debug) // compile using LLVM without optimizations
   }
```
See our [debugging guide](../../user/testing.md#source-level-debugging) for more informations.

### SIP-51 support: Drop forward binary compatibility of the Scala 2.13 standard library
We're chaning how the Scala standard library artifacts are published. Previously each Scala Native version shipped with 1 artifact for Scala standard library based on latest version of Scala. However this approach was insufficient to fully cover changes in Scala 3 standard library and it's 2 lines of releases: Scala LTS and Scala Next. 
To mittigate this issue and to prepare for unfreezing Scala 2 standard library we're changing how artifacts are published. Now each release of Scala Native would contain N variants of Scala standard library with custom versioning in format `<ScalaVersion>+<ScalaNativeVersion>`, eg. `3.3.2+0.5.0`.

### Improved missing symbols reports
The new release introuduces a refactored machanism for tracking and reporting missing symbols in the linked code.
Now when referring to not implemented Java standard library method, or a type from not cross-compiled library you would receive a detailed information about missing symbols containg its signature approximation and detailed stack trace of method calls leading to usage of missing symbol. 

### JVM service providers supports
We're introducing a user configured support for Java Service Providers.
Similarry to it's JVM variant these would allow you to introduce implementations of Service Provider Interfaces however due to Ahead-of-time compilation constraint and to limit ammount of introduced dependencies only explicitly enabled implementations would be linked in the final binary. 
For more details refer to [our guide](../../lib/javalib.md#Support-for-discovering-service-providers)

### User build settings
You can now specify the `basename` of your executable or library.. Typically it will default to the project's module name. 
In the following example, after running `nativeLink` you'll find an `myapp` or `myapp.exe` file in the target directory of your projects (by default in the `<project-dir>/target/<scala-version>/myapp`)

```scala
lazy val myproj = project
  .in(file("."))
  .settings(
    nativeConfig ~= { c =>
      c.withBaseName("myapp")
    }
  )
```

## Breaking changes
### Broken backward compatibility
Scala Native 0.5.0 breaks backward binary compatibility with previous releases of Scala Native.
Libraries published using version 0.4.x or older must be republished for Scala Native 0.5.x.

### Scala Native Runtime
* `scala.scalanative.unsafe.Zone.apply` by default uses a context function argument. For Scala 2 cross-compilation see [Memory managment section](../../user/interop.md#memory-management)
* The idiomatic alternative for C `void*` is now `Ptr[?]`(Scala 3) / `Ptr[_]` (Scala 2). Use `unsafe.CVoidPtr` for alias when defining bindings.

### Java Standard Library
* Removed harmfull stub types defined in multiple packages, for 0.4.x implementation see [scala-native-java-stubs](https://github.com/scala-native/scala-native-java-stubs): 
  * Removed `java.security` stubs - these were harmfull, by providing a false sense of security, especially in `java.security.MessageDiggest`.  
  * Removed `java.net.URL` stubs - these had no working implementation for majority of features.
  * Removed `java.reflect` stubs - cannot be implemented to provide real reflective access.

### POSIX bindings
* There is a breaking change in the `utsnameOps` of the posixlib. Prior to version 0.4.x, this Ops provided an API
that returned system properties as `String` for `Ptr[utsname.utsname]`. However, like other posixlib Ops,
it has been changed to return a `CArray` instead of a `String`.

#### Replace time_t fields with timespec in POSIX sys/stat.scala
In order to support nanosecond resolution for `java.nio.file.attribute.BasicFileAttributes`, we introduce breaking changes to sys/stat struct.

Previously, `stat` struct was defined as following and you were able to access second resolution file stat fields `st_atime`, `st_mtime` and `st_ctime` by `_7`, `_8` and `_9`.

```scala
type stat = CStruct13[
  dev_t, // st_dev
  dev_t, // st_rdev
  ino_t, // st_ino
  uid_t, // st_uid
  gid_t, // st_gid
  off_t, // st_size
  time_t, // st_atime
  time_t, // st_mtime
  time_t, // st_ctime
  blkcnt_t, // st_blocks
  blksize_t, // st_blksize
  nlink_t, // st_nlink
  mode_t // st_mode
]
```

Since 0.5.0, `stat` struct uses `timespec` for file stat fields. Therefore, you need to replace `_7`, `_8` and `_9` with `_7._1`, `_8._1` and `_9._1` to access those fields.

```scala
  type stat = CStruct13[
    dev_t, // st_dev
    dev_t, // st_rdev
    ino_t, // st_ino
    uid_t, // st_uid
    gid_t, // st_gid
    off_t, // st_size
    timespec, // st_atim or st_atimespec
    timespec, // st_mtim or st_mtimespec
    timespec, // st_ctim or st_ctimespec
    blkcnt_t, // st_blocks
    blksize_t, // st_blksize
    nlink_t, // st_nlink
    mode_t // st_mode
  ]
```

There is a helper implicit class `statOps`, which provides human-friendly field accessors like `st_dev` or `st_rdev`. It is recommended to use these fields from `statOps` rather than accessing fields by `_N`.

For example, import `scala.scalanative.posix.timeOps._` and `scala.scalanative.posix.sys.statOps.statOps`, then you can get the last access time of a file by `st_atime` or `st_atim` field.

```scala
import scala.scalanative.unsafe._
import scala.scalanative.posix.sys.stat
import scala.scalanative.posix.timeOps._
import scala.scalanative.posix.sys.statOps.statOps

Zone { implicit z =>
  val filepath = c"/path/to/file"
  val stat = alloc[stat.stat]()
  stat.stat(filepath, stat)
  // directly get the last access time in second resolution
  val atime = stat.st_atime
  // get the last access time in second resolution from timespec
  val atimesec = stat.st_atim.tv_sec 
  // get access time in nanosecond resolution from timespec
  val atimensec = stat.st_atim.tv_nsec
}

```

### Corrections to POSIX sys/utsname.scala

A number of defects have been corrected in `sys/utsname.scala`. These
corrections required breaking changes to field definition.  The change
most noticeable to end users is likely to be that the `uname` object,
holding implicit conversions, has been renamed to `utsname`.

A Test in `UtsnameTest.scala` shows on way of using the required CArray
fields in the `utsname` structure as instances of Scala types.


### Build integrator features

There are a few features to be used by build tool integrators that have changed.

* The entrypoint for building projects`scala.scalanative.build.Build.build`now takes an implicit `ExecutionContext` and returns `Future[Path]` instead of `Path`. Use `Build.buildCached` to use build-tool agnostic cache to skip linking if config and inputs have not changed.
* Changes to `scala.scalanative.build.Config`:
  * `Config.artifactPath` The final artifact is now calculated for the integrator. No need to worry about the extension for Windows.
  * Now the `baseName` can be set by the developer if the module name is not desired.
  * `Config.withTestConfig(true)` for tests to allow a `-test` to be appended as before for test applications. The default is `false` for normal projects.
  * `Config.withBaseDir(crossTarget)` is a Path that needs to be set rather than `workDir`.
  * `Config.workDir` is now calculated from `baseDir` but is available for integrators as needed.

```scala
val nativeConfig = build.NativeConfig.empty
  withBaseName("myapp") // override config module name

val config = build.Config.empty
  .withLogger(logger)
  .withMainClass(mainClass)
  .withClassPath(classpath)
  .withBaseDir(crossTarget) // Path
  .withModuleName(module.name)
  .withTestConfig(testConfig)
  .withCompilerConfig(nativeConfig)
```

### Other breaking changes:
* Runtime environment variables to control the Garbage Collector are now aligned
to match the Boehm GC as much as possible. In particular the first two variables
are used on all GCs. The last one works on Boehm and Commix.
    * GC_INITIAL_HEAP_SIZE (was SCALANATIVE_MIN_HEAP_SIZE)
    * GC_MAXIMUM_HEAP_SIZE (was SCALANATIVE_MAX_HEAP_SIZE)
    * GC_NPROCS (was SCALANATIVE_GC_THREADS)
    * GC_TIME_RATIO (was SCALANATIVE_TIME_RATIO)
    * GC_FREE_RATIO (was SCALANATIVE_FREE_RATIO)
    * GC_STATS_FILE (was SCALANATIVE_STATS_FILE)


## Deprecated definitions 

### Removed in this version
Ordered by version of Scala Native in which a deprecation was introduced.
* Deprecated in 0.3.7
  * ScalaNativePlugin.scala 'val AutoImport'.<BR>

* Deprecated in 0.4.1
  * scala.scalanative.libc.signal.kill(pid, sig).<BR>
    Suggested replacement: kill(pid, sig) from POSIX signal.

  * scala.scalanative.libc.signal.SIGUSR1.<BR>
    Suggested replacement: SIGUSR1 from POSIX signal.

### Introduced in this version
All newly deprecated declarations are subject to removal in the future.

* posixlib unistd.scala 'sethostname()' is now deprecated because it
  is not part of the POSIX 2018 standard.

* posixlib unistd.scala 'vfork()' is now deprecated because it was removed
  in the POSIX.1-2018 standard. Suggested replacement: 'posix_spawn()'.


## Contributors

Big thanks to everybody who contributed to this release or reported an issue!

```
   105  Wojciech Mazur
   60   LeeTibbert
   19   Rikito Taniguchi
   18   Eric K Richardson
   10   Dimi Racordon
    6   Natsu Kagami
    5   David Bouyssié
    4   kim / Motoyuki Kimura
    3   Anton Sviridov
    2   Mark Hammons
    1   Jamie Willis
    1   Yawen Guan
    1   yuly16
    1   Jarek Sacha
    1   Michel Davit
    1   Jakub Kozłowski
    1   João Costa
```

## Merged PRs

## [v0.5.0-RC1](https://github.com/scala-native/scala-native/tree/v0.5.0-RC1) (2024-02-14)

[Full Changelog](https://github.com/scala-native/scala-native/compare/v0.4.17...v0.5.0-RC1)

**Merged pull requests (excluding 0.4.17 backports):**

### Scala Native sbt plugin
- Partial fix #2765: Remove long deprecated declaration in ScalaNativePlugin
  [\#3004](https://github.com/scala-native/scala-native/pull/3004)
  ([LeeTibbert](https://github.com/LeeTibbert))
- nativeLinkReleaseFast and nativeLinkReleaseFull SBT tasks
  [\#3391](https://github.com/scala-native/scala-native/pull/3391)
  ([keynmol](https://github.com/keynmol))
- fix: Use dedicated thread pool per `nativeLink` instead of using `ExecutionContext.global`
  [\#3725](https://github.com/scala-native/scala-native/pull/3725)
  ([WojciechMazur](https://github.com/WojciechMazur))


### Scala Native Compiler PLugin
- Don't unapply unecessary unboxing in lambdas
  [\#2938](https://github.com/scala-native/scala-native/pull/2938)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Fix encoding of `scala.Nothing` and `scala.Null` in type signatures
  [\#2949](https://github.com/scala-native/scala-native/pull/2949)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Handle passing null for unboxed arguments of extern methods
  [\#2950](https://github.com/scala-native/scala-native/pull/2950)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Report error when referencing local state in CFuncPtr
  [\#2957](https://github.com/scala-native/scala-native/pull/2957)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Fix lost information about value class instance
  [\#2959](https://github.com/scala-native/scala-native/pull/2959)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Encode main class name to match outputs of the compiler
  [\#2955](https://github.com/scala-native/scala-native/pull/2955)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Allow to define implicit class or extension in extern object/trait
  [\#3538](https://github.com/scala-native/scala-native/pull/3538)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Improve implementation of implicit class defined in extern object
  [\#3549](https://github.com/scala-native/scala-native/pull/3549)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Support universal equality of unsigned numeric types
  [\#3584](https://github.com/scala-native/scala-native/pull/3584)
  ([WojciechMazur](https://github.com/WojciechMazur))
- refactor: Remove `mapSourceURI`, always use local copy of sources when debugging
  [\#3635](https://github.com/scala-native/scala-native/pull/3635)
  ([WojciechMazur](https://github.com/WojciechMazur))
- improvement: Use` java.lang.StringBuilder` for optimized concatation of Strings in NIR CodeGen
  [\#3640](https://github.com/scala-native/scala-native/pull/3640)
  ([WojciechMazur](https://github.com/WojciechMazur))
- improvement: Better source positions relativization
  [\#3695](https://github.com/scala-native/scala-native/pull/3695)
  ([WojciechMazur](https://github.com/WojciechMazur))
- fix: compiler crash on primitive type checking against opaque types
  [\#3712](https://github.com/scala-native/scala-native/pull/3712)
  ([tanishiking](https://github.com/tanishiking))
- fix [nscplugin]: Dealias Scala 3 types until they're stable.
  [\#3727](https://github.com/scala-native/scala-native/pull/3727)
  ([WojciechMazur](https://github.com/WojciechMazur))
- improvement: Apply Scala2 Cleanup phase optimizations to generation of Array literals
  [\#3742](https://github.com/scala-native/scala-native/pull/3742)
  ([WojciechMazur](https://github.com/WojciechMazur))
- fix: Emit object method calls via method dispatch
  [\#3750](https://github.com/scala-native/scala-native/pull/3750)
  ([WojciechMazur](https://github.com/WojciechMazur))

### Scala Native runtime
- Add mulithreading support - part 1
  [\#3114](https://github.com/scala-native/scala-native/pull/3114)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Support JavaMemoryModel behaviour for shared variables
  [\#3117](https://github.com/scala-native/scala-native/pull/3117)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Introduce concept of `blocking extern` functions for better interop of GC with foreign code
  [\#3116](https://github.com/scala-native/scala-native/pull/3116)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Handle concurrent initialization of modules
  [\#3124](https://github.com/scala-native/scala-native/pull/3124)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Add support for object monitors and `synchronized` blocks
  [\#3126](https://github.com/scala-native/scala-native/pull/3126)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Intrinsic based `sizeOf[T]` / `alignmentOf[T]` resolution
  [\#3198](https://github.com/scala-native/scala-native/pull/3198)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Use intrinsic based implementation for `sizeof` / `alignmentof` instead of relaying on tags
  [\#3205](https://github.com/scala-native/scala-native/pull/3205)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Fix Scala3 compilation failures for intrinsic sizeOf using `unsafe.Nat` types
  [\#3245](https://github.com/scala-native/scala-native/pull/3245)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Correctly memset all allocated memory for stackallocN in scala 2
  [\#3257](https://github.com/scala-native/scala-native/pull/3257)
  ([natsukagami](https://github.com/natsukagami))
- Remove unsafe.Tag based type resolution for CFuncPtr.{fromScalaFunction,apply}
  [\#3270](https://github.com/scala-native/scala-native/pull/3270)
  ([tanishiking](https://github.com/tanishiking))
- Unsigned types improvements
  [\#3375](https://github.com/scala-native/scala-native/pull/3375)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Implement `scala.scalanative.annotation.align` annotation, replacement for JVM `@Contended`
  [\#3365](https://github.com/scala-native/scala-native/pull/3365)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Overhaul of `scala.scalanative.unsafe.{stackalloc,alloc}`
  [\#3411](https://github.com/scala-native/scala-native/pull/3411)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Better handling of uncaught exceptions in main and user threads
  [\#3423](https://github.com/scala-native/scala-native/pull/3423)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Cleanup stacktraces to not contain intrinsic method calls
  [\#3456](https://github.com/scala-native/scala-native/pull/3456)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Implement delimited continuations primitives
  [\#3286](https://github.com/scala-native/scala-native/pull/3286)
  ([natsukagami](https://github.com/natsukagami))
- feature: Add `BlobArray` - a variant of `Array[Byte]` which can be scanned by GC.
  [\#3663](https://github.com/scala-native/scala-native/pull/3663)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Api change: Replace `Ptr[Byte]` with Ptr[_] where applicable. 
  [\#3753](https://github.com/scala-native/scala-native/pull/3753)
  ([WojciechMazur](https://github.com/WojciechMazur))

### Scala Standard Library
- Allow to use `scala.collection.concurrent.TrieMap`
  [\#3149](https://github.com/scala-native/scala-native/pull/3149)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Adapt `scala.concurrent.ExecutionContext` to use concurrent executor in multithreading mode 
  [\#3145](https://github.com/scala-native/scala-native/pull/3145)
  ([WojciechMazur](https://github.com/WojciechMazur))
- New model for publishing scalalib artifacts
  [\#3326](https://github.com/scala-native/scala-native/pull/3326)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Don't require scalalib to depend on javalib in the build.
  [\#3566](https://github.com/scala-native/scala-native/pull/3566)
  ([WojciechMazur](https://github.com/WojciechMazur))
- scalalib: Remove redundant Scala2 stdlib overrides
  [\#3743](https://github.com/scala-native/scala-native/pull/3743)
  ([WojciechMazur](https://github.com/WojciechMazur))


### Java Standard Library
- Fix #2751: javalib Files#delete now throws informative DirectoryNotEmptyException
  [\#2753](https://github.com/scala-native/scala-native/pull/2753)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2280: Add Unix-only IPv6 TCP support to javalib
  [\#2823](https://github.com/scala-native/scala-native/pull/2823)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Adding missing `java.lang.Character` functionality
  [\#2871](https://github.com/scala-native/scala-native/pull/2871)
  ([j-mie6](https://github.com/j-mie6))
-  A few java.net.Inet*Address fixes
  [\#2877](https://github.com/scala-native/scala-native/pull/2877)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Port `j.u.ArrayDeque` from JSR 166
  [\#2898](https://github.com/scala-native/scala-native/pull/2898)
  ([armanbilge](https://github.com/armanbilge))
- Remove URL stubs for 0.5.0
  [\#2788](https://github.com/scala-native/scala-native/pull/2788)
  ([ekrich](https://github.com/ekrich))
- Fix #2911: javalib IPv6 addresses now display using only lowercase hexadecimal digits
  [\#2913](https://github.com/scala-native/scala-native/pull/2913)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2903: avoid systematic checking of String integrity in IEEE754Helpers
  [\#2907](https://github.com/scala-native/scala-native/pull/2907)
  ([david-bouyssie](https://github.com/david-bouyssie))
- Fix #2927: Expunge non-JVM j.l.String#getValue()
  [\#2928](https://github.com/scala-native/scala-native/pull/2928)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #I2925: A j.l.String constructor now yields immutable strings
  [\#2929](https://github.com/scala-native/scala-native/pull/2929)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2935: Ensure StringBuilder does not alter existing child Strings
  [\#2936](https://github.com/scala-native/scala-native/pull/2936)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Optimize method `AbstractStringBuilder.append0(CharSequence, Int, Int)`
  [\#2909](https://github.com/scala-native/scala-native/pull/2909)
  ([david-bouyssie](https://github.com/david-bouyssie))
- Partial fix #2923: Improve javalib 64 bit UnixProcess waitFor handling
  [\#2972](https://github.com/scala-native/scala-native/pull/2972)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Add JDK9 constructors to `j.m.BigInteger`
  [\#2974](https://github.com/scala-native/scala-native/pull/2974)
  ([armanbilge](https://github.com/armanbilge))
- Fix #2975: Remove inefficient close() and chdir() calls in Process impls
  [\#2976](https://github.com/scala-native/scala-native/pull/2976)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Implement `Math.fma`
  [\#2979](https://github.com/scala-native/scala-native/pull/2979)
  ([armanbilge](https://github.com/armanbilge))
- Fix 2980: javalib j.l.p.UnixProcessGen2 now spawns when it can.
  [\#2982](https://github.com/scala-native/scala-native/pull/2982)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Partial fix #3005: j.n.InetAddress now uses more UnknownHostExceptions
  [\#3007](https://github.com/scala-native/scala-native/pull/3007)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Use higher resolution file stat fields
  [\#3049](https://github.com/scala-native/scala-native/pull/3049)
  ([i10416](https://github.com/i10416))
- Adapt `{Unix,Windows}PlainSocketImpl` to work in multithreading mode
  [\#3128](https://github.com/scala-native/scala-native/pull/3128)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.Atomic` types from JSR-166
  [\#3129](https://github.com/scala-native/scala-native/pull/3129)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.locks` types from JSR-166
  [\#3130](https://github.com/scala-native/scala-native/pull/3130)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.ThreadLocalRandom` from JSR-166
  [\#3132](https://github.com/scala-native/scala-native/pull/3132)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.BlockingQueue` and subtypes
  [\#3133](https://github.com/scala-native/scala-native/pull/3133)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.ForkJoinPool` from JSR-166
  [\#3136](https://github.com/scala-native/scala-native/pull/3136)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.ThreadPoolExecutor` from JSR-166
  [\#3141](https://github.com/scala-native/scala-native/pull/3141)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.atomic.Atomic*FieldUpdater`s from JSR-166
  [\#3148](https://github.com/scala-native/scala-native/pull/3148)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Implement `java.lang.Runtime.availableProcessors`
  [\#3150](https://github.com/scala-native/scala-native/pull/3150)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.ScheduledThreadPoolExecutor` from JSR-166
  [\#3142](https://github.com/scala-native/scala-native/pull/3142)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Port `java.util.concurrent.Semaphore` from JSR-166
  [\#3164](https://github.com/scala-native/scala-native/pull/3164)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Implement JDK-19 Thread API 
  [\#3242](https://github.com/scala-native/scala-native/pull/3242)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Synchronise ForkJoinPool port with JSR-166 changes for JDK 19
  [\#3243](https://github.com/scala-native/scala-native/pull/3243)
  ([WojciechMazur](https://github.com/WojciechMazur))
- javalib  WindowsPath fixes + unit tests
  [\#3299](https://github.com/scala-native/scala-native/pull/3299)
  ([jpsacha](https://github.com/jpsacha))
- Port `Item.java` from JSR-166
  [\#3311](https://github.com/scala-native/scala-native/pull/3311)
  ([mox692](https://github.com/mox692))
- Port `ConcurrentNavigableMap.java` from JSR-166
  [\#3324](https://github.com/scala-native/scala-native/pull/3324)
  ([mox692](https://github.com/mox692))
- Fix #3328: javalib non-Windows FileChannel size method now preserves current file position
  [\#3332](https://github.com/scala-native/scala-native/pull/3332)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3330: javalib FileChannel#truncate now only shrinks
  [\#3358](https://github.com/scala-native/scala-native/pull/3358)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Port Striped64, LongAdder from JSR-166
  [\#3342](https://github.com/scala-native/scala-native/pull/3342)
  ([mox692](https://github.com/mox692))
- Fix #3373: javalib {Stream, DoubleStream} sequential & parallel methods now match a JVM
  [\#3374](https://github.com/scala-native/scala-native/pull/3374)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Port Piped{Input,Output}Stream from Apache Harmony
  [\#2691](https://github.com/scala-native/scala-native/pull/2691)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Fix #3452: javalib Process.waitFor() now returns expected child exit code
  [\#3459](https://github.com/scala-native/scala-native/pull/3459)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Implement `java.nio.ByteBuffer`s backed by `unsafe.Ptr`
  [\#3532](https://github.com/scala-native/scala-native/pull/3532)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Remove URL related classes from supported javalib
  [\#3564](https://github.com/scala-native/scala-native/pull/3564)
  ([tanishiking](https://github.com/tanishiking))
- Port JSR-166 `LinkedTransferQueue`
  [\#3560](https://github.com/scala-native/scala-native/pull/3560)
  ([natsukagami](https://github.com/natsukagami))
- Port `java.util.concurrent.ConcurrentLinkedQueue` from JSR-166
  [\#3565](https://github.com/scala-native/scala-native/pull/3565)
- Fix #3530: Improve javalib InetAddress name-to-address resolution
  [\#3569](https://github.com/scala-native/scala-native/pull/3569)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Port `java.util.concurrent.ConcurrentHashMap` from JSR-166
  [\#3568](https://github.com/scala-native/scala-native/pull/3568)
  ([WojciechMazur](https://github.com/WojciechMazur))
  ([WojciechMazur](https://github.com/WojciechMazur))
- Support for Java Service Providers via linktime resolved `java.util.ServiceLoader.load`
  [\#3574](https://github.com/scala-native/scala-native/pull/3574)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Implement java.net DatagramSocket and DatagramPacket
  [\#3614](https://github.com/scala-native/scala-native/pull/3614)
  ([RustedBones](https://github.com/RustedBones))
- Fix #3657: Remove a number of java.net defects
  [\#3666](https://github.com/scala-native/scala-native/pull/3666)
  ([LeeTibbert](https://github.com/LeeTibbert))
- fix: Fix accessing mapped byte buffers if offset is not page size alligned
  [\#3679](https://github.com/scala-native/scala-native/pull/3679)
  ([WojciechMazur](https://github.com/WojciechMazur))
- improvement: Add most of missing JDK9+ methods for `java.nio` buffers
  [\#3681](https://github.com/scala-native/scala-native/pull/3681)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Fix #3672: Improve javalib java.net handling of NetworkInterface indices
  [\#3702](https://github.com/scala-native/scala-native/pull/3702)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3707: javalib Inet6Address#hashCode is now more robust to null hostnames
  [\#3709](https://github.com/scala-native/scala-native/pull/3709)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3705: java.net ServerSockets can now listen on both IPv6 & IPv4
  [\#3710](https://github.com/scala-native/scala-native/pull/3710)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3708: javalib Inet6Address ipv6Address argumentsare now resistant to outside change.
  [\#3715](https://github.com/scala-native/scala-native/pull/3715)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3706: java.net.ServerSocket now reports local address of accepted socket correctly
  [\#3714](https://github.com/scala-native/scala-native/pull/3714)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Improvement: Improve ByteBuffers performance
  [\#3718](https://github.com/scala-native/scala-native/pull/3718)
  ([WojciechMazur](https://github.com/WojciechMazur))
- feature: Implement experimental javalib IntStream & LongStream classes
  [\#3729](https://github.com/scala-native/scala-native/pull/3729)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3732: remove some defects in javalib FileChannel transfer methods
  [\#3734](https://github.com/scala-native/scala-native/pull/3734)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3738: javalib Files.createTemp*(bogusPath) no longer loops forever
  [\#3739](https://github.com/scala-native/scala-native/pull/3739)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3733: javalib FileChannel transfer* methods now honor Long counts
  [\#3746](https://github.com/scala-native/scala-native/pull/3746)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Implement javalib ZipFile stream method
  [\#3749](https://github.com/scala-native/scala-native/pull/3749)
  ([LeeTibbert](https://github.com/LeeTibbert))
- refactor: Remove stubs for `java.security` and `java.rmi`
  [\#3758](https://github.com/scala-native/scala-native/pull/3758)
  ([WojciechMazur](https://github.com/WojciechMazur))

### Toolchain
- Add support for 32-bit platforms through a linker-level switch
  [\#1571](https://github.com/scala-native/scala-native/pull/1571)
  ([shadaj](https://github.com/shadaj))
- Remove build warning for macOS M1
  [\#2732](https://github.com/scala-native/scala-native/pull/2732)
  ([ekrich](https://github.com/ekrich))
- Make compiling decisions internal
  [\#2942](https://github.com/scala-native/scala-native/pull/2942)
  ([ekrich](https://github.com/ekrich))
- Optimization to interflow 
  [\#2819](https://github.com/scala-native/scala-native/pull/2819)
  ([yuly16](https://github.com/yuly16))
- Allow to link as dynamic library
  [\#2145](https://github.com/scala-native/scala-native/pull/2145)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Use opaque pointers in generated LLVM IR when possible
  [\#3190](https://github.com/scala-native/scala-native/pull/3190)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Preserve more information about unreachable symbols
  [\#3537](https://github.com/scala-native/scala-native/pull/3537)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Validate well known issues in provided or discovered NativeConfig
  [\#3544](https://github.com/scala-native/scala-native/pull/3544)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Fix #2778: @link doesn't play nice with glue code
  [\#3389](https://github.com/scala-native/scala-native/pull/3389)
  ([ekrich](https://github.com/ekrich))
- Add `@define` annotation to propagate linktime reachability to native code compile phase
  [\#3427](https://github.com/scala-native/scala-native/pull/3427)
  ([armanbilge](https://github.com/armanbilge))
- Partition into multiple LLVM IR files per Scala source file originated from
  [\#3466](https://github.com/scala-native/scala-native/pull/3466)
  ([tanishiking](https://github.com/tanishiking))
- Enable to specify include and exclude resource patterns with glob
  [\#3562](https://github.com/scala-native/scala-native/pull/3562)
  ([tanishiking](https://github.com/tanishiking))
- improvement: Extend generation of source debug information with Class field layouts
  [\#3620](https://github.com/scala-native/scala-native/pull/3620)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Emit `acquire` fence before loading `final` field
  [\#3699](https://github.com/scala-native/scala-native/pull/3699)
  ([armanbilge](https://github.com/armanbilge))
- Optimize NIR to be memory efficient
  [\#3320](https://github.com/scala-native/scala-native/pull/3320)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Generate LLVM metadata 
  [\#2869](https://github.com/scala-native/scala-native/pull/2869)
  ([keynmol](https://github.com/keynmol))
- Unmangle procedure names in DISubprogram
  [\#3387](https://github.com/scala-native/scala-native/pull/3387)
  ([tanishiking](https://github.com/tanishiking))
- Fixes #2731: Need better way to detect 32-bit platforms
  [\#3436](https://github.com/scala-native/scala-native/pull/3436)
  ([ekrich](https://github.com/ekrich))
- Preserve local variables names in NIR
  [\#3386](https://github.com/scala-native/scala-native/pull/3386)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Add information about lexical scopes to NIR debug informations
  [\#3438](https://github.com/scala-native/scala-native/pull/3438)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Enforce narrower types in NIR and toolchain
  [\#3448](https://github.com/scala-native/scala-native/pull/3448)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Allow cross compiling of native tools
  [\#3233](https://github.com/scala-native/scala-native/pull/3233)
  ([ekrich](https://github.com/ekrich))
- Add filename and line number to backtrace
  [\#3343](https://github.com/scala-native/scala-native/pull/3343)
  ([tanishiking](https://github.com/tanishiking))
- Emit local values for the debugger
  [\#3443](https://github.com/scala-native/scala-native/pull/3443)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Better backtrace in classloading for unreachable symbols
  [\#3449](https://github.com/scala-native/scala-native/pull/3449)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Fix tracking references of delayed methods and make generating backtraces safer
  [\#3455](https://github.com/scala-native/scala-native/pull/3455)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Add variants of NativeConfig methods taking a mapping function instead of computed value
  [\#3457](https://github.com/scala-native/scala-native/pull/3457)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Detect at linktime usage of unsupported features
  [\#3472](https://github.com/scala-native/scala-native/pull/3472)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Do not emit single LLVM IR file for release mode + LTO none
  [\#3514](https://github.com/scala-native/scala-native/pull/3514)
  ([tanishiking](https://github.com/tanishiking))
- improvement: Better resolution of sources classpath
  [\#3646](https://github.com/scala-native/scala-native/pull/3646)
  ([WojciechMazur](https://github.com/WojciechMazur))
- feature: Autmatically disable unused multithreading to improve performance
  [\#3670](https://github.com/scala-native/scala-native/pull/3670)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Allow cross-compiling from Mac to Linux and vice versa
  [\#3716](https://github.com/scala-native/scala-native/pull/3716)
  ([kubukoz](https://github.com/kubukoz))
- improvement: Use debug metadata to create stacktraces on Windows when LTO enabled
  [\#3659](https://github.com/scala-native/scala-native/pull/3659)
  ([WojciechMazur](https://github.com/WojciechMazur))
- feautre: Relaxed memory model for final fields, strict semantics with `@safePublish` annotation
  [\#3719](https://github.com/scala-native/scala-native/pull/3719)
  ([WojciechMazur](https://github.com/WojciechMazur))
- fix: Optimize inlining decisions and set reasonable values to optimizer config 
  [\#3722](https://github.com/scala-native/scala-native/pull/3722)
  ([WojciechMazur](https://github.com/WojciechMazur))
- improvement: Detect user config change and prune generated/native sources on change
  [\#3724](https://github.com/scala-native/scala-native/pull/3724)
  ([WojciechMazur](https://github.com/WojciechMazur))
- refactor: Pipeline generation of LLVM IR and it's compilation
  [\#3622](https://github.com/scala-native/scala-native/pull/3622)
  ([WojciechMazur](https://github.com/WojciechMazur))
- fix [toolchain]:Prevent usage of outdated compilation outputs in incremenal compilatiation
  [\#3728](https://github.com/scala-native/scala-native/pull/3728)
  ([WojciechMazur](https://github.com/WojciechMazur))

### Garbage Collectors
- Fix #2921: Commix Heap.c now compiles with Clang 15.0.3
  [\#2922](https://github.com/scala-native/scala-native/pull/2922)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fixes #3151: Standardize GC env vars
  [\#3152](https://github.com/scala-native/scala-native/pull/3152)
  ([ekrich](https://github.com/ekrich))
- Install an `EXC_BAD_ACCESS` handler for safepoints on MacOS
  [\#3278](https://github.com/scala-native/scala-native/pull/3278)
  ([natsukagami](https://github.com/natsukagami))
- Multithreading support for Commix GC
  [\#3229](https://github.com/scala-native/scala-native/pull/3229)
  ([WojciechMazur](https://github.com/WojciechMazur))
- improvement/GC: Create a dedicated thread to invoke registered `WeakReference` handlers
  [\#3649](https://github.com/scala-native/scala-native/pull/3649)
  ([WojciechMazur](https://github.com/WojciechMazur))
- refactor: Synchronize naming of GC public API
  [\#3652](https://github.com/scala-native/scala-native/pull/3652)
  ([WojciechMazur](https://github.com/WojciechMazur))
- fix: Ensure to mark aligned fields by fixing `MemoryLayout.referenceFieldsOffsets` bug
  [\#3735](https://github.com/scala-native/scala-native/pull/3735)
  ([WojciechMazur](https://github.com/WojciechMazur))
- refactor/fix: Use object offsets instead of field indexes for precise object scanning
  [\#3736](https://github.com/scala-native/scala-native/pull/3736)
  ([WojciechMazur](https://github.com/WojciechMazur))

### Documentation
-  Fix #1826: Add documentation for GC settings
  [\#2910](https://github.com/scala-native/scala-native/pull/2910)
  ([ekrich](https://github.com/ekrich))

### Versioning
- Upgrade JUnit interface to 0.13.3
  [\#3425](https://github.com/scala-native/scala-native/pull/3425)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Update libunwind to 17.0.1
  [\#3499](https://github.com/scala-native/scala-native/pull/3499)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Set versionSchema for library part of Scala Native runtime
  [\#3524](https://github.com/scala-native/scala-native/pull/3524)
  ([WojciechMazur](https://github.com/WojciechMazur))

### Tests interface
- Allow to prefetch debug info to mitigate spurious failures in the CI
  [\#3517](https://github.com/scala-native/scala-native/pull/3517)
  ([WojciechMazur](https://github.com/WojciechMazur))

### POSIX bindings
- Fix #2707: Implement most of POSIX stddef.h
  [\#2709](https://github.com/scala-native/scala-native/pull/2709)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2629, #2295: posix sockaddr_storage now implements specification
  [\#2630](https://github.com/scala-native/scala-native/pull/2630)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2717: Complete POSIX errno.scala by providing errno variable
  [\#2721](https://github.com/scala-native/scala-native/pull/2721)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2666: posix dirent constants are now parameterless methods
  [\#2668](https://github.com/scala-native/scala-native/pull/2668)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Partial fix #2623: posixlib sys/socket sendto() & recvfrom() now succeed on Linux & Windows using IPv6
  [\#2705](https://github.com/scala-native/scala-native/pull/2705)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2626, #2623: handle socket fields sin6_len & sin_len, when present on OS
  [\#2734](https://github.com/scala-native/scala-native/pull/2734)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Simplify & shorten additional posixlib socket code paths
  [\#2742](https://github.com/scala-native/scala-native/pull/2742)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2738: Shorten posixlib uio codepaths & add UioTest
  [\#2741](https://github.com/scala-native/scala-native/pull/2741)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Simplify & shorten posixlib netdb code paths
  [\#2743](https://github.com/scala-native/scala-native/pull/2743)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2255: complete socket.h; simplify & shorten code paths
  [\#2766](https://github.com/scala-native/scala-native/pull/2766)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2835: Simplify & shorten posixlib time code paths
  [\#2836](https://github.com/scala-native/scala-native/pull/2836)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2832: A step towards posixlib using shared types
  [\#2833](https://github.com/scala-native/scala-native/pull/2833)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2873, #2865: posix netdb is missing symbols
  [\#2881](https://github.com/scala-native/scala-native/pull/2881)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2831: Towards a more complete posixlib unistd.scala
  [\#2882](https://github.com/scala-native/scala-native/pull/2882)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2892: Implement posixlib sys/select pselect()
  [\#2895](https://github.com/scala-native/scala-native/pull/2895)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2891: posixlib spawn is now implemented.
  [\#2894](https://github.com/scala-native/scala-native/pull/2894)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Partial fix #2963: Add missing SIGTERM & kin to posixlib signal.scala
  [\#2964](https://github.com/scala-native/scala-native/pull/2964)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #2893: Implement posixlib wait.scala
  [\#2969](https://github.com/scala-native/scala-native/pull/2969)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Rework many POSIX and C lib with new trait feature
  [\#2996](https://github.com/scala-native/scala-native/pull/2996)
  ([ekrich](https://github.com/ekrich))
- Fix #3263: Fix failing in `utsnameOps`
  [\#3264](https://github.com/scala-native/scala-native/pull/3264)
  ([mox692](https://github.com/mox692))
- Fix #3276: Remove two major defects in posixlib utsname.scala
  [\#3280](https://github.com/scala-native/scala-native/pull/3280)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Fix #3690: compiling posixlib StatTest no longer warns about use of tmpnam()
  [\#3703](https://github.com/scala-native/scala-native/pull/3703)
  ([LeeTibbert](https://github.com/LeeTibbert))


### C standard library bindings
- Make clib traits private
  [\#3038](https://github.com/scala-native/scala-native/pull/3038)
  ([LeeTibbert](https://github.com/LeeTibbert))
- Add bindings and helpers for C atomics
  [\#3115](https://github.com/scala-native/scala-native/pull/3115)
  ([WojciechMazur](https://github.com/WojciechMazur))
- Rename clib `atomic` to `stdatomic` and make it more compliant with C `stdatomic.h`
  [\#3541](https://github.com/scala-native/scala-native/pull/3541)
  ([WojciechMazur](https://github.com/WojciechMazur))
